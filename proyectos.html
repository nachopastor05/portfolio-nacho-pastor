<!-- Todo lo relacionado con el head, el header y el footer esta explicado en el archivo "index.html", ya que es el mismo para todas las páginas -->
<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Para poder realizar el responsive -->
	<title>Proyecto</title>
	<link rel="stylesheet" type="text/css" href="css/estilo.css"> <!-- Conexión del HTML con el archivo de estilos CSS -->
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&display=swap" rel="stylesheet">
</head>
<body>
	<header> <!-- Este es el header de la web, dónde se encuentran el logotipo (insertado mediante una imagen) y el menú de navegación, que se hace responsive convirtiéndose en menú de hamburguesa -->
		<a href="index.html"><img src="img/logo.png"></a> <!-- Logotipo -->
		<a href="#" class="abrir"> <!-- Botón hamburguesa -->
			<span></span>
			<span></span>
			<span></span>
		</a>
		<nav> <!-- Menú navegación -->
			<a href="#" class="cerrar">x</a> <!-- Botón de cerrar el menú cuando está responsive -->
			<ul> <!-- Lista con enlaces a las páginas de la web -->
				<li><a href="index.html">Inicio</a></li>
				<li><a href="sobre-mi.html">Sobre Mí</a></li>
				<li><a href="proyectos.html" class="activa">Proyectos</a></li>
				<li><a href="contacto.html">Contacto</a></li>
			</ul>
		</nav>
	</header>
	<section> <!-- Sección creada para la galeria de proyectos realizados -->
		<div class="galeria">
			<a href="img/01.jpg" class="grafico"><img src="img/01tn.jpg"> <!-- Imagen -->
				<div> <!-- Cuadro de texto que aparece cuando el ratón se sitúa encima de las imágenes -->
					<h3>Patrón modular</h3> <!-- Título de la imagen -->
					<p>"gráfico"</p> <!-- Nombre del servicio al que pertenece -->
				</div>
			</a>
			<a href="img/02.jpg"><img src="img/02tn.jpg">
				<div>
					<h3>Pez buscatrazos</h3>
					<p>"gráfico"</p>
				</div>
			</a><a href="img/03.jpg" class="grafico"><img src="img/03tn.jpg">
				<div>
					<h3>Gallo buscatrazos</h3>
					<p>"gráfico"</p>
				</div>
			</a>
			<a href="img/04.jpg"><img src="img/04tn.jpg">
				<div>
					<h3>Ciervo buscatrazos</h3>
					<p>"gráfico"</p>
				</div>
			</a>
			<a href="img/05.jpg"><img src="img/05tn.jpg">
				<div>
					<h3>Tipográfia</h3>
					<p>"gráfico"</p>
				</div>
			</a>
			<a href="img/06.jpg"><img src="img/06tn.jpg">
				<div>
					<h3>Beernes</h3>
					<p>"branding"</p>
				</div>
			</a>
			<a href="img/07.jpg"><img src="img/07tn.jpg">
				<div>
					<h3>Alfa Asesores</h3>
					<p>"branding"<br>"web"</p>
				</div>
			</a>
			<a href="img/08.jpg"><img src="img/08tn.jpg">
				<div>
					<h3>Personajes</h3>
					<p>"gráfico"</p>
				</div>
			</a>
		</div>
	</section>
	<div class="modal"> <!-- Caja de luz que se habre al clicar encima de una imagen. Para su correcta funcionalidad se ha añadido un script en este mismo archivo (más abajo) -->
		<a href="#">&lt;</a> <!-- Flecha para poder navegar hacia la izquierda entre las imágenes. El código "&lt;" es el símbolo de menor que "<"  -->
		<img src="img/01.jpg">
		<a href="#">&gt;</a> <!-- Flecha para poder navegar hacia la derecha entre las imágenes. El código "&lt;" es el símbolo de mayor que ">"  -->
	</div>
	<footer> <!-- Este es el footer de la web, dónde se encuentran el menú de navegación, iconos de redes sociales y los datos de contacto -->
		<nav> <!-- Menú navegación -->
			<ul> <!-- Lista con enlaces a las páginas de la web -->
				<li><a href="index.html">Inicio</a></li>
				<li><a href="sobre-mi.html">Sobre Mí</a></li>
				<li><a href="proyectos.html" class="activa">Proyectos</a></li>
				<li><a href="contacto.html">Contacto</a></li>
			</ul>
		</nav>
		<div class="redes"> <!-- Iconos de las redes sociales -->
			<a href="#"><img src="img/instagram.png"></a>
			<a href="#"><img src="img/linkedin.png"></a>
			<a href="#"><img src="img/facebook.png"></a>
		</div>
		<div class="contacto"> <!-- Widget de datos de contacto -->
			<h3>Contacto</h3> <!-- Título del widget -->
			<p><span>E-mail</span><br>nachopastor05@gmail.com</p> <!-- He puesto la etiqueta "span" en los tres párrafos para poner en negrita lo que haya dentro. La etiqueta "br" es para hacer un salto de línea -->
			<p><span>Tel</span><br>+34 695 80 77 82</p>
			<p><span>Dirección</span><br>C/ Fuente de San Isidro, 5
		</div>
	</footer>

	<script src="js/funciones.js"></script> <!-- Conexión del HTML con el archivo de funciones JS -->
	<script> //Añado otro script porque la galería modal solo va a estar en esta página

		const miniaturas = document.querySelectorAll(".galeria a"); //Guardo todas las imágenes de la galería en una constante
		const modal = document.querySelector(".modal"); //Guardo el DIV que contiene la clase "modal" en una constante
		const imgModal = document.querySelector(".modal img"); //Guardo la imagen que se verá al abrirse la caja de luz en una constante
		const flechas = document.querySelectorAll(".modal a"); //Guardo las flechas de navegación de las imágenes en una constante
		let imgActual = 0; //Esta variable representa la imagen GRANDE, es decir, su índice dentro del sistema
		let rutasImg = []; //Guardo todas las rutas de las imágenes grandes

		//Esta función determina el funcionamiento al clicar en las flechas de navegación o al usar las flechas del teclado
		function navegacionImg(direccion){ //0 --> atrás y 1 --> delante
			if(direccion == 0){
				//Atras
				imgActual = imgActual > 0 ? imgActual - 1 : miniaturas.length - 1;
			}else{ //1
				//Adelante
				imgActual = imgActual < miniaturas.length - 1 ? imgActual + 1 : 0; 
			}
			imgModal.setAttribute("src",rutasImg[imgActual]);
		}

		//Abrir la modal
		miniaturas.forEach(function(miniatura,indice){
			rutasImg.push(miniaturas[indice].getAttribute("href")); //Guardo todos los HREF una sola vez
			miniatura.addEventListener("click",function(evento){
				evento.preventDefault(); //Previene el comportamiento por defecto del navegador
				imgActual = indice; //Con cada click, asigno el valor a la imagen actual según el índice de la miniatura sobre la que he hecho click
				imgModal.setAttribute("src",rutasImg[imgActual]); //Uso el valor de IMGACTUAL para leer el "array" miniaturas y extraer el HREF
				modal.classList.add("visible"); //Añado la clase "visible" a la modal para que se vea la caja de luz
			});
		});

		//Cerrar la modal al hacer click en cualquier parte de la pantalla, excepto en las flechas
		modal.addEventListener("click",function(){			
			modal.classList.remove("visible");
		});

		//Navegación entre imágenes al hacer click en las respectivas flechas
		flechas.forEach(function(flecha,indice){
			flecha.addEventListener("click",function(evento){
				evento.preventDefault();
				evento.stopPropagation(); //Evita la propagación adicional del evento actual en las fases de captura y bubbling
				navegacionImg(indice);
			});
		});

		//Interacción con teclado
		window.addEventListener("keyup",function(evento){
			switch(evento.keyCode){
				case 27: //Cuando se pulsa la tecla "esc", se deja de ver la modal			
					modal.classList.remove("visible");
				break;
				case 37: //Cuando se pulsa la tecla de la flecha a la izquierda, se pasa a la imagen anterior
					navegacionImg(0);
				break;	
				case 39: //Cuando se pulsa la tecla de la flecha a la derecha, se pasa a la imagen siguiente
					navegacionImg(1);
				break;		
			}
		});

	</script>
</body>
</html>